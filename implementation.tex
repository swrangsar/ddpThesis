\chapter{Implementation of a cognitive Base Transceiver Station in GSM band 
using OpenBTS and spectrum sensing techniques}

In this project we try to demonstrate a more efficient 
way of utilizing the spectral resources by having the secondary users
make use of the spectrum holes. The spectrum holes are the frequency channels
that have been licensed to the primary users but are not being used at that
particular space and time. This allows secondary users to make use of already 
licensed frequency bands instead of having to allot them completely new 
frequency bands altogether.

In the first phase of the project, we implemented a two-frequency system where
the secondary system had an option of switching into one of two frequency 
channels depending on which one was free. We expanded this to a four-frequency
system with two primary systems in the second phase. The secondary would 
search for an unused frequency band among these four frequencies, two of which
always remain used.

\section{The two-frequency system}
\subsection{Experimental setup}

Experimental setup diagram:

The hardware and software components used in this experiment are the following
\begin{itemize}
    \item \textbf{A primary BTS --} This is a Linux laptop running OpenBTS
    software with 1 USRP as the OpenBTS radio interface. The USRP hardware kit
    has a WBX 50-2200 MHz RX/TX daughterboard in it. Two mobile phones 
    (primary users) are connected to the OpenBTS network running in this 
    primary BTS system.
    \item \textbf{A secondary BTS --} This is an Ubuntu desktop running
    OpenBTS and GNURadio software. Two USRP kits are connected to this
    machine, one as the OpenBTS radio interface and the other as the GNURadio
    radio interface. The GNURadio software is used for the spectrum sensing. 
    So, here the OpenBTS software with its radio interface acts as a Base
    Transceiver Station (BTS) while the GNURadio software alongwith its radio
    interface acts as a spectrum sensor. Each of the two USRP kits has a
    WBX 50-2200 MHz RX/TX daughterboard. Two other mobile phones (secondary 
    users) are connected to the OpenBTS network running in this secondary BTS.
\end{itemize}

The secondary BTS system has cognitive capabilities. It was a challenge to 
make OpenBTS and GNURadio run simultaneously in the same computer and make 
them communicate with each other. GNURadio keeps sensing the spectrum used by
the secondary users continuously in the background and takes decisions whether
to switch the frequency band of the secondary BTS or not, depending upon the 
energy level in the frequency band in which it is running.

\subsection{Testing}
First we choose any two GSM frequency bands say 945 MHz ($F_1$) and 950 MHz 
($F_2$). The primary users are made to occupy $F_1$. Then we let the secondary
users come into $F_1$. This makes the energy level in $F_1$ go high, which gets
detected by the spectrum sensor of the secondary BTS. So, the secondary BTS 
moves out of $F_1$ and switches its frequency to $F_2$. Similarly, now if the
primary users are made to come into $F_2$, the secondary switches back to $F_1$.

In this experiment we don't have the situation where both $F_1$ and $F_2$ remain 
occupied because there is only one set of primary users. Therefore, the 
secondary also doesn't check the energy level in a channel before taking the
decision to switch into that channel.




